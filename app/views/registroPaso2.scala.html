<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8">
<title>Bienvenido a Freshbook</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Loading Bootstrap -->
<link href="assets/bootstrap/css/bootstrap.css" rel="stylesheet">
<link href="assets/bootstrap/css/prettify.css" rel="stylesheet">

<!-- Loading Flat UI -->
<link href="assets/stylesheets/flat-ui.css" rel="stylesheet">

<link rel="shortcut icon" href="assets/images/favicon.png">
<link href="assets/stylesheets/pages.css" rel="stylesheet">

<style>
      #map-canvas {
        height: 400px;;
        width: 400px;;
        margin: 0px;
        padding: 0px;
        margin-left: 140px;
        
      }
    </style>
    
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script>
// The following example creates a marker in Stockholm, Sweden
// using a DROP animation. Clicking on the marker will toggle
// the animation between a BOUNCE animation and no animation.

var stockholm = new google.maps.LatLng(59.32522, 18.07002);
var parliament = new google.maps.LatLng(59.327383, 18.06747);
var marker;
var map;
var geocoder;

var popup = null;

function initialize() {
  var mapOptions = {
    zoom: 11,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: stockholm
  };
  

  map = new google.maps.Map(document.getElementById('map-canvas'),
          mapOptions);

  popup = new google.maps.InfoWindow();

  geocoder = new google.maps.Geocoder();

  marker = new google.maps.Marker({
    map:map,
    draggable:true,
    animation: google.maps.Animation.DROP,
    position: parliament
   
  });
  google.maps.event.addListener(marker, 'click', toggleBounce);
  
  google.maps.event.addListener(marker, 'mouseup', function(){

	  codeLatLng(marker);
	 // toggleBounce();

	  });


}


function codeLatLng(marker) {
	  var markerLatLng = marker.getPosition();
	  var lat = markerLatLng.lat();
	  var lng = markerLatLng.lng();
	 
	  var latlng = new google.maps.LatLng(lat, lng);
	  geocoder.geocode({'latLng': latlng}, function(results, status) {
	    if (status == google.maps.GeocoderStatus.OK) {
	      if (results[0]) {
	       
	                marker.setMap(map);
	                marker.setPosition(latlng);
	        
	        
	        for (var i = 0; i < results[0].address_components.length; i++) {
                var addr = results[0].address_components[i];
                if (addr.types[0] == 'country') country = addr.long_name;                       
                else if (addr.types[0] == ['administrative_area_level_1'])
                var state = addr.long_name;            
                else if (addr.types[0] == ['locality'])
                var city = addr.long_name;
                
            }

            if(typeof state === "undefined") 
            {
                
                state = "";
                city = "";
                popup.setContent(country);
                $('#input-location').val(country)
            }

            else if(typeof city === "undefined")
            {
                
                city = "";
                popup.setContent(country+", "+state);
                $('#input-location').val(country+", "+state)
            }
            else
            {
            	popup.setContent(country+", "+state+", "+city);
            	$('#input-location').val(country+", "+state+", "+city);
            }
                
	       
	        popup.open(map, marker);
            
	         
	      } 
	    } 
	  });
	}

function toggleBounce() {

  if (marker.getAnimation() != null) {
    marker.setAnimation(null);
  } else {
    marker.setAnimation(google.maps.Animation.BOUNCE);
  }
}

google.maps.event.addDomListener(window, 'load', initialize);

    </script>

</head>

<body onclick="fadeError()" onload="initialize()">

	<div class="header">
		<div class="cfix log_bar">
			<div class="left">
				<img src="assets/images/head_log.png" width="120" height="43" />
			</div>
		</div>
	</div>
	<!-- Log container -->

	<div class="contenedorGlobal cfix">
		
			
				<div class="pvl" align="center" style="margin-left:-430px;">
					<span style="font-size: 36px">Registro de usuario</span>
				</div>
				<div id="form_box cfix" class="marginTM" align="center">
				
				   <div id="paneleft" class="left" style="width:50%">
				       <div id="map-canvas"></div>
				   </div>
				   <div id="panelRight" class="right" style="width:50%">
				       
				        
						<div class="divRow marginBM">
							<input type="text" class="input_largeW form-control"
								data-type="text" name="input-location" placeholder="UbicaciÃ³n"
								id="input-location" style="border-radius: 0;font-size:15px;color:black" readonly="readonly" />
						</div>
						
						<div class="cfix marginTM">
							<a href="/registroPaso3Pag"><button type="submit" class="btn btn-hg btn-primary marginTM"
								name="continuar-button" id="continuar-button" style="border-radius:0">Continuar</button></a>
						</div>
					
				   </div>
				    
				</div>
		
	</div>
	<!-- Contenedor Global -->

	<div class="footer pvl">
		<div align="center">
			<span>Sweet Development 2013</span>
		</div>
	</div>
	<!-- Footer -->

	<script src="assets/javascripts/jquery-1.8.3.min.js"></script>
	<script src="assets/javascripts/jquery-ui-1.10.3.custom.min.js"></script>
	<script src="assets/javascripts/jquery.ui.touch-punch.min.js"></script>
	<script src="assets/javascripts/bootstrap.min.js"></script>
	<script src="assets/javascripts/bootstrap-select.js"></script>
	<script src="assets/javascripts/bootstrap-switch.js"></script>
	<script src="assets/javascripts/flatui-checkbox.js"></script>
	<script src="assets/javascripts/flatui-radio.js"></script>
	<script src="assets/javascripts/jquery.tagsinput.js"></script>
	<script src="assets/javascripts/jquery.placeholder.js"></script>
	<script src="assets/bootstrap/js/google-code-prettify/prettify.js"></script>
	<script src="assets/javascripts/application.js"></script>
	<script src="assets/javascripts/aplicacion.js"></script>


</body>

</html>